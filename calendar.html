<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ú® 24 Days of Vision | Thought Seer ‚ú®</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cormorant Garamond', serif;
            min-height: 100vh;
            overflow-x: hidden;
            background: #0a0a12;
            color: #fff;
        }

        /* BACKGROUND - PNG starts visible, GIF fades in */
        .background-layer-png {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            background-image: url('background.png');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
        }

        .background-layer-gif {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            background-image: url('background.gif');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            opacity: 0;
            animation: fadeInGif 3s ease-in-out 21s forwards;
        }

        @keyframes fadeInGif {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }

        .background-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            background: radial-gradient(ellipse at center, 
                rgba(10, 10, 18, 0.5) 0%, 
                rgba(10, 10, 18, 0.75) 50%,
                rgba(10, 10, 18, 0.9) 100%);
            pointer-events: none;
        }

        /* SNOW CONTAINER */
        .snow-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 2;
            pointer-events: none;
            overflow: hidden;
        }

        .snowflake {
            position: absolute;
            top: -20px;
            color: #fff;
            font-size: 1rem;
            text-shadow: 0 0 5px #fff, 0 0 10px rgba(255, 255, 255, 0.5);
            animation: fall linear infinite, sway ease-in-out infinite;
            pointer-events: none;
            opacity: 0.8;
        }

        @keyframes fall {
            0% { transform: translateY(-20px) rotate(0deg); }
            100% { transform: translateY(100vh) rotate(360deg); }
        }

        @keyframes sway {
            0%, 100% { margin-left: 0; }
            25% { margin-left: 20px; }
            75% { margin-left: -20px; }
        }

        /* MAIN CONTENT */
        .main-content {
            position: relative;
            z-index: 10;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 30px 20px 80px;
        }

        /* HEADER */
        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .title {
            font-family: 'Cinzel', serif;
            font-size: clamp(2.5rem, 7vw, 4.5rem);
            font-weight: 700;
            color: #ffffff;
            text-shadow: 
                0 0 10px rgba(255, 255, 255, 0.5),
                0 0 30px rgba(74, 144, 120, 0.4),
                2px 2px 4px rgba(0, 0, 0, 0.8);
            letter-spacing: 3px;
            margin-bottom: 15px;
        }

        .title::before, .title::after {
            content: '‚ú®';
            margin: 0 15px;
        }

        .subtitle {
            font-size: 1.6rem;
            color: #b8d4c8;
            font-style: italic;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.8);
            letter-spacing: 2px;
        }

        /* CALENDAR GRID - Circular Layout */
        .calendar-container {
            position: relative;
            width: 100%;
            max-width: 1000px;
            min-height: 900px;
            margin: 0 auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .calendar-grid {
            position: relative;
            width: 1000px;
            height: 900px;
        }

        /* WINDOW CARD */
        .window-card {
            position: absolute;
            width: 100px;
            height: 100px;
            cursor: pointer;
            transition: filter 0.3s ease;
            filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.5));
            /* White neon glow behind windows */
            background: radial-gradient(ellipse at center, rgba(255, 255, 255, 0.15) 0%, transparent 70%);
            padding: 8px;
            border-radius: 12px;
            /* Positioned via JavaScript */
        }

        /* Drifting animation for regular windows - orbiting effect */
        .window-card.drifting {
            animation: orbitDrift var(--drift-duration, 60s) ease-in-out infinite;
            animation-delay: var(--drift-delay, 0s);
        }

        @keyframes orbitDrift {
            0%, 100% {
                transform: translate(0, 0) rotate(0deg) scale(1);
            }
            25% {
                transform: translate(var(--drift-x1, 15px), var(--drift-y1, -10px)) rotate(2deg) scale(1.02);
            }
            50% {
                transform: translate(var(--drift-x2, -10px), var(--drift-y2, 15px)) rotate(-2deg) scale(0.98);
            }
            75% {
                transform: translate(var(--drift-x3, 12px), var(--drift-y3, 8px)) rotate(1deg) scale(1.01);
            }
        }

        .window-card.drifting:hover {
            animation-play-state: paused;
            transform: scale(1.1) !important;
            z-index: 100;
        }
        }

        .window-card:hover:not(.locked) {
            transform: scale(1.08) translateY(-5px);
            filter: drop-shadow(0 15px 30px rgba(74, 144, 120, 0.4));
        }

        .window-card.locked {
            cursor: not-allowed;
            filter: brightness(0.7) drop-shadow(0 5px 10px rgba(0, 0, 0, 0.5));
        }

        /* Different neon hues for locked windows */
        .window-card.locked.hue-green {
            filter: brightness(0.7) hue-rotate(0deg) drop-shadow(0 0 15px rgba(100, 255, 150, 0.3));
        }
        .window-card.locked.hue-green .window-image {
            border-color: rgba(100, 255, 150, 0.5);
            box-shadow: 0 0 20px rgba(100, 255, 150, 0.3), 0 0 40px rgba(100, 255, 150, 0.1);
        }

        .window-card.locked.hue-blue {
            filter: brightness(0.7) drop-shadow(0 0 15px rgba(100, 180, 255, 0.3));
        }
        .window-card.locked.hue-blue .window-image {
            border-color: rgba(100, 180, 255, 0.5);
            box-shadow: 0 0 20px rgba(100, 180, 255, 0.3), 0 0 40px rgba(100, 180, 255, 0.1);
        }

        .window-card.locked.hue-red {
            filter: brightness(0.7) drop-shadow(0 0 15px rgba(255, 120, 120, 0.3));
        }
        .window-card.locked.hue-red .window-image {
            border-color: rgba(255, 120, 120, 0.5);
            box-shadow: 0 0 20px rgba(255, 120, 120, 0.3), 0 0 40px rgba(255, 120, 120, 0.1);
        }

        .window-card.locked.hue-purple {
            filter: brightness(0.7) drop-shadow(0 0 15px rgba(180, 130, 255, 0.3));
        }
        .window-card.locked.hue-purple .window-image {
            border-color: rgba(180, 130, 255, 0.5);
            box-shadow: 0 0 20px rgba(180, 130, 255, 0.3), 0 0 40px rgba(180, 130, 255, 0.1);
        }

        .window-card.locked.hue-cyan {
            filter: brightness(0.7) drop-shadow(0 0 15px rgba(100, 255, 255, 0.3));
        }
        .window-card.locked.hue-cyan .window-image {
            border-color: rgba(100, 255, 255, 0.5);
            box-shadow: 0 0 20px rgba(100, 255, 255, 0.3), 0 0 40px rgba(100, 255, 255, 0.1);
        }

        .window-card.locked:hover {
            filter: brightness(0.8) drop-shadow(0 5px 15px rgba(255, 255, 255, 0.2));
        }

        /* Window Image */
        .window-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 8px;
            border: 3px solid #4a9078;
            box-shadow: 
                0 0 15px rgba(255, 255, 255, 0.4),
                0 0 30px rgba(255, 255, 255, 0.2),
                inset 0 0 20px rgba(255, 255, 255, 0.2),
                0 0 10px rgba(74, 144, 120, 0.3);
        }

        .window-card:not(.locked) .window-image {
            animation: candleFlicker 3s ease-in-out infinite;
        }

        @keyframes candleFlicker {
            0%, 100% { 
                filter: brightness(1) saturate(1);
                box-shadow: 
                    0 0 15px rgba(255, 255, 255, 0.4),
                    0 0 30px rgba(255, 255, 255, 0.2),
                    inset 0 0 20px rgba(255, 255, 255, 0.2),
                    0 0 10px rgba(74, 144, 120, 0.3);
            }
            25% { 
                filter: brightness(1.15) saturate(1.1);
                box-shadow: 
                    0 0 20px rgba(255, 255, 255, 0.6),
                    0 0 40px rgba(255, 255, 255, 0.3),
                    inset 0 0 25px rgba(255, 255, 255, 0.4),
                    0 0 15px rgba(74, 144, 120, 0.5);
            }
            50% { 
                filter: brightness(0.95) saturate(0.95);
                box-shadow: 
                    0 0 12px rgba(255, 255, 255, 0.3),
                    0 0 25px rgba(255, 255, 255, 0.15),
                    inset 0 0 18px rgba(255, 255, 255, 0.15),
                    0 0 8px rgba(74, 144, 120, 0.2);
            }
            75% { 
                filter: brightness(1.1) saturate(1.05);
                box-shadow: 
                    0 0 18px rgba(255, 255, 255, 0.5),
                    0 0 35px rgba(255, 255, 255, 0.25),
                    inset 0 0 22px rgba(255, 255, 255, 0.3),
                    0 0 12px rgba(74, 144, 120, 0.4);
            }
        }

        /* Day Number Badge */
        .day-number {
            position: absolute;
            bottom: 8px;
            right: 8px;
            background: linear-gradient(135deg, #ffffff 0%, #b8d4c8 100%);
            color: #1a3d2e;
            font-family: 'Cinzel', serif;
            font-weight: 700;
            font-size: 1.3rem;
            width: 38px;
            height: 38px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            box-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.5),
                inset 0 1px 2px rgba(255, 255, 255, 0.5);
            border: 2px solid rgba(74, 144, 120, 0.5);
        }

        /* Pulsing candle glow on unlocked day numbers */
        .window-card:not(.locked) .day-number {
            animation: candlePulse 2s ease-in-out infinite;
        }

        @keyframes candlePulse {
            0%, 100% {
                box-shadow: 
                    0 2px 8px rgba(0, 0, 0, 0.5),
                    0 0 10px rgba(255, 200, 100, 0.4),
                    0 0 20px rgba(255, 150, 50, 0.2);
                transform: scale(1);
            }
            50% {
                box-shadow: 
                    0 2px 8px rgba(0, 0, 0, 0.5),
                    0 0 15px rgba(255, 200, 100, 0.7),
                    0 0 30px rgba(255, 150, 50, 0.4);
                transform: scale(1.05);
            }
        }

        .window-card.locked .day-number {
            background: linear-gradient(135deg, #666 0%, #333 100%);
            color: #999;
        }

        /* Lock Icon for locked windows */
        .lock-icon {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            color: rgba(255, 255, 255, 0.3);
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
            display: none;
        }

        .window-card.locked .lock-icon {
            display: block;
        }

        /* Opened State */
        .window-card.opened .window-image {
            animation: none;
            filter: brightness(1.2) saturate(1.2);
            border-color: #4a9078;
        }

        .window-card.opened::after {
            content: '‚úì';
            position: absolute;
            top: 8px;
            left: 8px;
            background: #2d8f2d;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.9rem;
            font-weight: bold;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.4);
        }

        /* SPECIAL DAY 24 - Centered with Wreath */
        .window-card.day-24 {
            width: 160px;
            height: 160px;
            left: 50% !important;
            top: 50% !important;
            margin-left: -80px !important;
            margin-top: -80px !important;
            z-index: 50;
            /* No drifting for day 24 */
            animation: day24Glow 4s ease-in-out infinite !important;
        }

        @keyframes day24Glow {
            0%, 100% {
                filter: drop-shadow(0 0 20px rgba(255, 255, 255, 0.5)) drop-shadow(0 0 40px rgba(74, 144, 120, 0.3));
            }
            50% {
                filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.8)) drop-shadow(0 0 60px rgba(74, 144, 120, 0.5));
            }
        }

        /* Christmas Wreath Border */
        .window-card.day-24::before {
            content: '';
            position: absolute;
            top: -25px;
            left: -25px;
            right: -25px;
            bottom: -25px;
            border-radius: 50%;
            background: 
                conic-gradient(
                    from 0deg,
                    rgba(34, 100, 50, 0.9) 0deg,
                    rgba(50, 140, 70, 0.8) 30deg,
                    rgba(34, 100, 50, 0.9) 60deg,
                    rgba(50, 140, 70, 0.8) 90deg,
                    rgba(34, 100, 50, 0.9) 120deg,
                    rgba(50, 140, 70, 0.8) 150deg,
                    rgba(34, 100, 50, 0.9) 180deg,
                    rgba(50, 140, 70, 0.8) 210deg,
                    rgba(34, 100, 50, 0.9) 240deg,
                    rgba(50, 140, 70, 0.8) 270deg,
                    rgba(34, 100, 50, 0.9) 300deg,
                    rgba(50, 140, 70, 0.8) 330deg,
                    rgba(34, 100, 50, 0.9) 360deg
                );
            -webkit-mask: radial-gradient(transparent 65%, black 67%, black 85%, transparent 87%);
            mask: radial-gradient(transparent 65%, black 67%, black 85%, transparent 87%);
            z-index: -1;
            animation: wreathSpin 120s linear infinite;
        }

        @keyframes wreathSpin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Wreath decorations - berries and bow */
        .window-card.day-24::after {
            content: 'üéÄ';
            position: absolute;
            top: -35px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 1.8rem;
            text-shadow: 0 0 10px rgba(255, 100, 100, 0.8);
            animation: bowBounce 2s ease-in-out infinite;
        }

        @keyframes bowBounce {
            0%, 100% { transform: translateX(-50%) scale(1); }
            50% { transform: translateX(-50%) scale(1.1); }
        }

        .window-card.day-24 .day-number {
            width: 50px;
            height: 50px;
            font-size: 1.6rem;
            bottom: 15px;
            right: 15px;
        }

        .window-card.day-24:not(.locked) .window-image {
            animation: candleFlicker 2s ease-in-out infinite, christmasGlow 4s ease-in-out infinite;
        }

        @keyframes christmasGlow {
            0%, 100% {
                box-shadow: 
                    inset 0 0 30px rgba(255, 255, 255, 0.3),
                    0 0 20px rgba(74, 144, 120, 0.4),
                    0 0 40px rgba(255, 100, 100, 0.2);
            }
            50% {
                box-shadow: 
                    inset 0 0 40px rgba(255, 255, 255, 0.5),
                    0 0 30px rgba(74, 144, 120, 0.6),
                    0 0 60px rgba(100, 255, 150, 0.3);
            }
        }

        /* MODAL */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.4s ease;
            cursor: pointer;
        }

        .modal-overlay.show {
            display: flex;
            opacity: 1;
        }

        .modal-content {
            background: linear-gradient(145deg, #1a2520 0%, #0d1512 100%);
            border: 3px solid #4a9078;
            border-radius: 20px;
            max-width: 90%;
            width: 550px;
            max-height: 90vh;
            overflow-y: auto;
            padding: 40px;
            text-align: center;
            box-shadow: 
                0 0 50px rgba(74, 144, 120, 0.3),
                0 0 100px rgba(74, 144, 120, 0.1);
            transform: scale(0.8);
            transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: default;
        }

        .modal-overlay.show .modal-content {
            transform: scale(1);
        }

        .modal-day {
            font-family: 'Cinzel', serif;
            font-size: 2.5rem;
            color: #ffffff;
            margin-bottom: 25px;
            text-shadow: 0 0 20px rgba(74, 144, 120, 0.5);
        }

        .modal-image {
            max-width: 100%;
            max-height: 50vh;
            border-radius: 12px;
            border: 3px solid #4a9078;
            margin-bottom: 25px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        }

        .modal-message {
            font-size: 1.5rem;
            line-height: 1.8;
            color: #d4e8de;
            margin-bottom: 30px;
            font-style: italic;
        }

        /* Christmas Eve Special Message */
        .christmas-message {
            animation: sparkle 2s ease-in-out infinite;
        }

        @keyframes sparkle {
            0%, 100% { text-shadow: 0 0 10px rgba(255, 255, 255, 0.5); }
            50% { text-shadow: 0 0 30px rgba(255, 255, 255, 1), 0 0 50px rgba(74, 144, 120, 0.5); }
        }

        .close-btn {
            background: transparent;
            border: 2px solid #4a9078;
            color: #ffffff;
            padding: 18px 50px;
            border-radius: 30px;
            font-family: 'Cinzel', serif;
            font-size: 1.3rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .close-btn:hover {
            background: #4a9078;
            color: #ffffff;
            box-shadow: 0 0 30px rgba(74, 144, 120, 0.5);
        }

        /* MAGICAL FLOATING MESSAGE CLOUD */
        .magic-cloud {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 1110px;  /* 650 * 1.71 = 1111 */
            height: 770px;  /* 450 * 1.71 = 769 */
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
            opacity: 0;
            pointer-events: none;
            animation: cloudAppear 7s ease-in-out forwards;
        }

        .cloud-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
            filter: drop-shadow(0 0 30px rgba(255, 255, 255, 0.5));
        }

        .cloud-text-container {
            position: relative;
            z-index: 10;
            text-align: center;
            padding: 80px 120px;
            max-width: 650px;
        }

        .magic-cloud .cloud-book {
            font-family: 'Cinzel', serif;
            font-size: 1.3rem;
            color: #1a3d2e;
            font-weight: 700;
            margin-bottom: 5px;
            text-shadow: 0 1px 3px rgba(255, 255, 255, 0.9);
        }

        .magic-cloud .cloud-book-subtitle {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1rem;
            color: #4a9078;
            font-style: italic;
            margin-bottom: 15px;
        }

        .magic-cloud .cloud-message {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.6rem;
            font-style: italic;
            color: #1a3d2e;
            line-height: 1.7;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.8);
            margin-bottom: 20px;
        }

        .magic-cloud .cloud-oracle {
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.3rem;
            color: #2d5a4a;
            line-height: 1.6;
            margin-bottom: 15px;
            padding-top: 15px;
            border-top: 1px solid rgba(74, 144, 120, 0.3);
        }

        .magic-cloud .cloud-signature {
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
            color: #4a9078;
            font-weight: 600;
        }

        @keyframes cloudAppear {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.5);
            }
            15% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            85% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(-50%, -40%) scale(1.1);
            }
        }

        /* Twinkling Stars */
        .twinkle-star {
            position: fixed;
            width: 4px;
            height: 4px;
            background: #ffffff;
            border-radius: 50%;
            pointer-events: none;
            z-index: 1999;
            animation: twinkle var(--twinkle-duration, 1s) ease-in-out infinite;
            box-shadow: 0 0 6px #fff, 0 0 12px rgba(255, 255, 200, 0.8);
        }

        .twinkle-star.large {
            width: 6px;
            height: 6px;
            box-shadow: 0 0 10px #fff, 0 0 20px rgba(255, 255, 200, 0.8);
        }

        .twinkle-star::before {
            content: '‚ú¶';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 12px;
            color: #fffde7;
            text-shadow: 0 0 8px #fff;
        }

        .twinkle-star.large::before {
            font-size: 18px;
        }

        @keyframes twinkle {
            0%, 100% { 
                opacity: 0.3; 
                transform: scale(0.8);
            }
            50% { 
                opacity: 1; 
                transform: scale(1.2);
            }
        }

        /* Floating particles around cloud */
        .magic-particle {
            position: fixed;
            width: 8px;
            height: 8px;
            background: radial-gradient(circle, #ffffff 0%, #4a9078 100%);
            border-radius: 50%;
            pointer-events: none;
            z-index: 1999;
            animation: particleFloat 3s ease-out forwards;
        }

        @keyframes particleFloat {
            0% {
                opacity: 1;
                transform: translate(0, 0) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(var(--tx), var(--ty)) scale(0);
            }
        }

        /* Sparkles Animation */
        .sparkles {
            position: absolute;
            pointer-events: none;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .sparkle {
            position: absolute;
            width: 10px;
            height: 10px;
            background: #ffffff;
            border-radius: 50%;
            animation: sparkleFloat 3s ease-in-out infinite;
            opacity: 0;
        }

        @keyframes sparkleFloat {
            0% { opacity: 0; transform: translateY(0) scale(0); }
            50% { opacity: 1; transform: translateY(-50px) scale(1); }
            100% { opacity: 0; transform: translateY(-100px) scale(0); }
        }


        /* ELEGANT NAVIGATION MENU */
        .elegant-nav {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: flex-end;
        }

        .nav-link {
            background: rgba(15, 20, 18, 0.85);
            border: 1px solid rgba(74, 144, 120, 0.5);
            color: #ffffff;
            padding: 12px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-family: 'Cinzel', serif;
            font-size: 0.95rem;
            transition: all 0.3s ease;
            backdrop-filter: blur(5px);
        }

        .nav-link:hover {
            background: rgba(74, 144, 120, 0.3);
            border-color: #4a9078;
            box-shadow: 0 0 15px rgba(74, 144, 120, 0.3);
            transform: translateY(-2px);
        }

        /* ABOUT MODAL */
        .about-modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(10px);
            z-index: 10000;
            display: none;
            justify-content: center;
            align-items: center;
            opacity: 0;
            transition: opacity 0.4s ease;
        }

        .about-modal-overlay.show {
            display: flex;
            opacity: 1;
        }

        .about-modal-content {
            background: linear-gradient(145deg, #1a2520 0%, #0d1512 100%);
            border: 2px solid #4a9078;
            border-radius: 20px;
            max-width: 90%;
            width: 700px;
            max-height: 85vh;
            overflow-y: auto;
            padding: 40px;
            position: relative;
        }

        .about-close-btn {
            position: absolute;
            top: 15px;
            right: 20px;
            background: transparent;
            border: none;
            color: #4a9078;
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s;
        }

        .about-close-btn:hover {
            color: #ffffff;
        }

        .about-modal-content h2 {
            font-family: 'Cinzel', serif;
            font-size: 2rem;
            color: #ffffff;
            margin-bottom: 25px;
            text-align: center;
            border-bottom: 1px solid rgba(74, 144, 120, 0.3);
            padding-bottom: 15px;
        }

        .about-modal-content h3 {
            font-family: 'Cinzel', serif;
            font-size: 1.3rem;
            color: #4a9078;
            margin: 25px 0 15px;
        }

        .about-body p {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.85);
            line-height: 1.8;
            margin-bottom: 15px;
        }

        .about-contact {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .about-btn {
            background: #4a9078;
            color: #ffffff;
            padding: 15px 30px;
            border-radius: 25px;
            text-decoration: none;
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .about-btn:hover {
            background: #5db896;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(74, 144, 120, 0.4);
        }

        .about-btn.email-btn {
            background: transparent;
            border: 2px solid #4a9078;
        }

        .about-btn.email-btn:hover {
            background: #4a9078;
        }

        @media (max-width: 768px) {
            .elegant-nav {
                top: auto;
                bottom: 20px;
                right: 10px;
                left: 10px;
                justify-content: center;
            }

            .nav-link {
                padding: 10px 15px;
                font-size: 0.85rem;
            }
        }

        /* FOOTER - Elegant Dark Semi-transparent */
        .footer {
            position: relative;
            z-index: 10;
            margin-top: auto;
            padding: 40px 30px;
            text-align: center;
            background: rgba(15, 20, 18, 0.92);
            border-top: 1px solid rgba(74, 144, 120, 0.3);
            width: 100%;
        }

        .footer p {
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.85);
            line-height: 2;
            margin-bottom: 8px;
        }

        .footer .brand-name {
            color: #ffffff;
            font-weight: 600;
            font-family: 'Cinzel', serif;
        }

        .footer .keen-link {
            color: #4a9078;
            font-weight: 600;
        }

        .footer .rewards-text {
            display: block;
            margin: 20px auto;
            font-size: 1.2rem;
            color: #ffffff;
        }

        .footer .rewards-text .highlight {
            color: #4a9078;
            font-weight: 600;
        }

        .phone-link {
            display: inline-block;
            background: #4a9078;
            color: #ffffff !important;
            padding: 15px 35px;
            border-radius: 30px;
            margin: 20px 0;
            font-size: 1.3rem;
            font-weight: 600;
            text-decoration: none;
            transition: all 0.3s;
            letter-spacing: 1px;
        }

        .phone-link:hover {
            background: #3d7a65;
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(74, 144, 120, 0.4);
        }

        .privacy-note {
            font-style: italic;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.95rem;
            margin-top: 20px;
        }

        /* Responsive */
        @media (max-width: 1000px) {
            .calendar-container {
                max-width: 100%;
                height: 750px;
                transform: scale(0.85);
                transform-origin: top center;
            }
        }

        @media (max-width: 768px) {
            .calendar-container {
                height: 700px;
                transform: scale(0.65);
            }

            .window-card.day-24 {
                width: 150px;
                height: 150px;
            }

            .modal-content {
                padding: 25px;
            }

            .title::before, .title::after {
                display: none;
            }

            .audio-toggle {
                width: 40px;
                height: 40px;
                font-size: 1.2rem;
            }
        }

        @media (max-width: 480px) {
            .calendar-container {
                transform: scale(0.5);
            }
        }

        /* Test Mode Indicator */
        .test-mode-badge {
            position: fixed;
            top: 10px;
            right: 10px;
            background: #ff4444;
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
            z-index: 9999;
            display: none;
        }

        .test-mode-badge.active {
            display: block;
        }

        /* TEST PANEL */
        .test-panel {
            position: fixed;
            top: 0;
            left: 0;
            width: 350px;
            height: 100vh;
            background: rgba(15, 20, 18, 0.98);
            border-right: 2px solid #4a9078;
            z-index: 9998;
            overflow-y: auto;
            padding: 20px;
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }

        .test-panel.open {
            transform: translateX(0);
        }

        .test-panel-toggle {
            position: fixed;
            top: 80px;
            left: 20px;
            background: rgba(74, 144, 120, 0.9);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 8px;
            cursor: pointer;
            z-index: 9999;
            font-size: 1rem;
            font-family: 'Cinzel', serif;
            display: none; /* Hidden for production */
        }

        .test-panel-toggle:hover {
            background: #4a9078;
        }

        .test-panel h3 {
            color: #ffffff;
            font-family: 'Cinzel', serif;
            font-size: 1.4rem;
            margin-bottom: 20px;
            border-bottom: 1px solid #4a9078;
            padding-bottom: 10px;
        }

        .test-panel .day-selector {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 8px;
            margin-bottom: 20px;
        }

        .test-panel .day-btn {
            background: rgba(74, 144, 120, 0.3);
            border: 1px solid #4a9078;
            color: white;
            padding: 10px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .test-panel .day-btn:hover {
            background: #4a9078;
        }

        .test-panel .day-btn.active {
            background: #4a9078;
            box-shadow: 0 0 10px rgba(74, 144, 120, 0.5);
        }

        .test-panel .preview-section {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .test-panel label {
            display: block;
            color: #b8d4c8;
            font-size: 0.95rem;
            margin-bottom: 8px;
        }

        .test-panel textarea {
            width: 100%;
            background: rgba(0, 0, 0, 0.5);
            border: 1px solid #4a9078;
            border-radius: 5px;
            color: white;
            padding: 10px;
            font-family: 'Cormorant Garamond', serif;
            font-size: 1.1rem;
            resize: vertical;
            min-height: 80px;
        }

        .test-panel .preview-btn {
            width: 100%;
            background: #4a9078;
            border: none;
            color: white;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            font-family: 'Cinzel', serif;
            font-size: 1.1rem;
            margin-top: 10px;
            transition: all 0.2s;
        }

        .test-panel .preview-btn:hover {
            background: #5db896;
            box-shadow: 0 0 15px rgba(74, 144, 120, 0.5);
        }

        .test-panel .reset-btn {
            width: 100%;
            background: transparent;
            border: 1px solid #ff6b6b;
            color: #ff6b6b;
            padding: 10px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
            margin-top: 20px;
        }

        .test-panel .reset-btn:hover {
            background: #ff6b6b;
            color: white;
        }

        /* Audio Toggle Button */
        .audio-toggle {
            position: fixed;
            top: 20px;
            left: 20px;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: rgba(26, 45, 38, 0.9);
            border: 2px solid #4a9078;
            color: #fff;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 1000;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .audio-toggle:hover {
            background: #4a9078;
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(74, 144, 120, 0.5);
        }

        .audio-toggle.playing {
            animation: audioPulse 2s ease-in-out infinite;
        }

        @keyframes audioPulse {
            0%, 100% { box-shadow: 0 0 10px rgba(74, 144, 120, 0.3); }
            50% { box-shadow: 0 0 25px rgba(74, 144, 120, 0.7); }
        }
    </style>
</head>
<body>

    <!-- 
    ‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
    ‚ïë  AUDIO SETUP - Upload your audio file and update the src     ‚ïë
    ‚ïë  Supported formats: MP3, OGG, WAV                            ‚ïë
    ‚ïë  Recommended: ambient.mp3 (or rename your file to this)      ‚ïë
    ‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
    -->
    <audio id="ambientAudio" preload="auto" volume="0.10">
        <!-- YOUR AUDIO FILE: Change "ambient.mp3" to your filename -->
        <source src="ambient.mp3" type="audio/mpeg">
        <source src="ambient.ogg" type="audio/ogg">
        <source src="ambient.wav" type="audio/wav">
    </audio>
    <script>
        // Set audio volume to 10% (very quiet) - plays once, no loop
        document.getElementById('ambientAudio').volume = 0.10;
    </script>

    <!-- Background - PNG first, then GIF fades in -->
    <div class="background-layer-png"></div>
    <div class="background-layer-gif"></div>
    <div class="background-overlay"></div>

    <!-- Snow -->
    <div class="snow-container" id="snowContainer"></div>

    <!-- Audio Toggle Button -->
    <button class="audio-toggle" id="audioToggle" title="Toggle Sound">
        üîá
    </button>

    <!-- Test Mode Badge -->
    <div class="test-mode-badge" id="testBadge">TEST MODE</div>

    <!-- Test Panel Toggle -->
    <button class="test-panel-toggle" id="testPanelToggle">üß™ Test</button>

    <!-- Test Panel -->
    <div class="test-panel" id="testPanel">
        <h3>üß™ Message Tester</h3>
        
        <div class="preview-section">
            <label>Select Day to Preview:</label>
            <div class="day-selector" id="daySelector"></div>
        </div>

        <div class="preview-section">
            <label>Wisdom Quote (Cloud Message):</label>
            <textarea id="testQuote" placeholder="Enter wisdom quote..."></textarea>
            <label style="margin-top:10px;">Quote Source:</label>
            <textarea id="testSource" style="min-height:40px;" placeholder="e.g., Laws of Dreams"></textarea>
        </div>

        <div class="preview-section">
            <label>Daily Message (Modal):</label>
            <textarea id="testMessage" placeholder="Enter daily message..."></textarea>
        </div>

        <button class="preview-btn" id="previewCloudBtn">‚ú® Preview Cloud Message</button>
        <button class="preview-btn" id="previewModalBtn" style="margin-top:8px; background:#2d5a4a;">üìú Preview Modal</button>
        <button class="preview-btn" id="previewBothBtn" style="margin-top:8px; background:#1a3d2e;">üé≠ Preview Both (Full Experience)</button>
        
        <button class="reset-btn" id="resetStorageBtn">üóëÔ∏è Reset All Opened Windows</button>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <header class="header">
            <h1 class="title">24 Days of Vision</h1>
            <p class="subtitle">Your Daily Insight from Thought Seer</p>
        </header>

        <div class="calendar-container">
            <div class="calendar-grid" id="calendarGrid"></div>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal-overlay" id="modal">
        <div class="modal-content">
            <div class="sparkles" id="sparkles"></div>
            <h2 class="modal-day" id="modalDay"></h2>
            <img class="modal-image" id="modalImage" src="" alt="Daily Vision">
            <p class="modal-message" id="modalMessage"></p>
            <button class="close-btn" onclick="closeModal()">Received ‚ú®</button>
        </div>
    </div>

    <!-- Elegant Navigation Menu -->
    <nav class="elegant-nav" id="elegantNav">
        <a href="#about" class="nav-link" onclick="openAboutModal(event)">‚ú® About</a>
        <a href="https://www.keen.com/psychic-readings/thought-seer/515437" target="_blank" class="nav-link">üìû Call / Chat Now</a>
        <a href="donate.html" class="nav-link">üéÅ Donate for Free Rewards</a>
    </nav>

    <!-- About Modal -->
    <div class="about-modal-overlay" id="aboutModal">
        <div class="about-modal-content">
            <button class="about-close-btn" onclick="closeAboutModal()">‚úï</button>
            <h2>About Thought Seer</h2>
            <div class="about-body">
                <p>Renowned for providing over 75,000 accurate international forecasts, she ensures reliability. Check out the feedback! Whether you're looking for love readings, spiritual insights, or online psychic consultations, she's here to help. Get started with a free psychic chat for quick outcomes and explore new options with confidence. 100% confidentiality guaranteed.</p>
                
                <h3>My Approach</h3>
                <p>Use the chat to ask your question. Provide first name(s) and city/town(s) where you each are located.</p>
                
                <p>She's a true human "thought finder," specializing in love readings, spiritual insights, and psychic readings online. As a neuroscientific-coding developer, she's mastered how the brain processes information, connecting feelings to recognition of surroundings, including sight, sound, and smell. She's learned to navigate this process swiftly, utilizing changes in neuroinflammation to uncover decisions and emotions, even pinpointing locations on a map.</p>
                
                <p>Think of her brain as a Google search bar, delivering top hits of information about your friend's feelings, emotions, and locations. Fast, confidential, and highly accurate, she doesn't rely on archaic database storage. Instead, she uses her brain-training and software forecast development skills to detect today from a future outcome perspective.</p>
                
                <p>But she's also human, genuinely caring about people. She's here to provide an enjoyable and entertaining experience, viewing each day as an opportunity to learn from God's love and share it with others.</p>
                
                <div class="about-contact">
                    <a href="https://www.keen.com/psychic-readings/thought-seer/515437" target="_blank" class="about-btn">üìû Call or Chat Now</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>&copy; 2025 <span class="brand-name">Thought Seer</span>. All Rights Reserved.</p>
        <p>Advisory services and readings provided exclusively through <span class="keen-link">Keen</span></p>
        <p class="rewards-text">üçÄ Ask me about <span class="highlight">Keen Rewards</span> during your reading!</p>
        <p>Thought Seer adheres to all <span class="keen-link">Keen Member Policies</span> to guarantee your privacy and trust.</p>
        <a href="tel:18002755336,,88888" class="phone-link">üìû 1.800.275.5336 x 88888</a>
        <p class="privacy-note">Privacy Notice: This calendar runs locally on your device. No personal data is collected.</p>
    </footer>

    <script>
        // ==================== CONFIGURATION ====================
        const TEST_MODE = false; // Set to false for production
        
        // Cloud images (upload cloud1.png through cloud7.png)
        const cloudImages = ['cloud1.png', 'cloud2.png', 'cloud3.png', 'cloud4.png', 'cloud6.png', 'cloud7.png'];
        
        // Wisdom quotes from "Guidance is a Piece of God" book
        const wisdomQuotes = [
            { text: "Magic is born when two learn to breathe together‚Ä¶", book: "Laws of Dreams" },
            { text: "Magic is when another can see the universe through your soul‚Ä¶", book: "Laws of Dreams" },
            { text: "All struggles are born of separation through misunderstanding‚Ä¶ Magic is harmony. It is perfect love.", book: "Laws of Dreams" },
            { text: "True choices are a blessing. When the Universe respects us, it offers us choice.", book: "Laws of Dreams" },
            { text: "Clarity is through decision‚Ä¶ Once we choose direction, steps on the Path of Dreams and Faith will begin.", book: "Laws of Dreams" },
            { text: "Love is a choice and is unfailing guidance‚Ä¶", book: "Laws of Dreams" },
            { text: "Direction is the gift of courage‚Ä¶ Sincerity keeps us on our Paths.", book: "Laws of Dreams" },
            { text: "We are the Care-takers of our Souls, the Master is the Caretaker of all our choices.", book: "Laws of Dreams" },
            { text: "Loneliness is not Oneness‚Ä¶ it is simply loss of Faith. Loneliness is a lie.", book: "Laws of Dreams" },
            { text: "Questions create confusions, silence creates clarity‚Ä¶", book: "Laws of Dreams" },
            { text: "Fidelity is Love shown through a Pure Soul and Clear Mind‚Ä¶", book: "Laws of Dreams" },
            { text: "Crying is the blessing of God on a Soul, when rawness of emotions break their solace from hidden places.", book: "Laws of Dreams" },
            { text: "Re-living is a new breath‚Ä¶ a new Path, it is the re-birth of a person.", book: "Laws of Dreams" },
            { text: "Faith is our Guide.", book: "Laws of Faith" },
            { text: "Faith is the freedom of the caged bird with no worries.", book: "Laws of Faith" },
            { text: "Faith is meant to travel with us down our paths.", book: "Laws of Faith" },
            { text: "The rain supports the generation of a new moment of a new dream.", book: "Laws of Faith" },
            { text: "The Universe is your Master as you are the Master of the Universe.", book: "Laws of Faith" },
            { text: "The Master is the majestic flow of Life through our Body, Mind and Souls.", book: "Laws of Faith" },
            { text: "Love is nameless. Their name is not what they are called but the makeup of their Being.", book: "Laws of Love" },
            { text: "True Love is natural and universal.", book: "Laws of Love" },
            { text: "Direction is of love and love is of Abundance‚Ä¶", book: "Laws of Love" },
            { text: "Finding the one you Love is merely about asking.", book: "Laws of Love" },
            { text: "When there is hope, we begin to live.", book: "Laws of Pain" },
            { text: "Blessings can land only on a Soul that is still, silent and long-suffering.", book: "Laws of Pain" },
            { text: "Healing honours the Universe's nature and its beauty.", book: "Laws of Pain" },
            { text: "Infants are healing to old Beings‚Ä¶ they are created of raw purity.", book: "Laws of Pain" },
            { text: "Balance is found in healing of the Soul first, and the body follows.", book: "Laws of Pain" },
            { text: "Life and death have a connecting doorway‚Ä¶ Death is a passage to a new beginning.", book: "Laws of Separateness & Oneness" },
            { text: "Nature is made of each piece of Being, completing a Cycle to join the two ends of Life.", book: "Laws of Separateness & Oneness" }
        ];

        // Oracle messages - Christmas wishes about personal matters
        const oracleMessages = [
            "This Christmas, may your heart find the peace it has been seeking.",
            "A blessing of abundance flows toward you this holiday season.",
            "Love surrounds you more than you know. Open your heart to receive it.",
            "This season brings clarity to a decision you've been pondering.",
            "Someone is thinking of you with warmth and gratitude right now.",
            "Financial blessings are aligning for you as the year closes.",
            "Your patience will be rewarded before the new year arrives.",
            "A reunion with someone special is written in your stars.",
            "Trust the path you're on ‚Äì it leads exactly where you need to be.",
            "Healing energy surrounds your family this Christmas.",
            "An unexpected gift of joy arrives when you least expect it.",
            "Your dreams are closer to manifesting than you realize.",
            "This Christmas, release what no longer serves you and make room for miracles.",
            "A message of hope reaches you through an unlikely messenger.",
            "Your inner strength shines brighter than ever this season.",
            "Romance and warmth fill your holiday moments.",
            "Protection surrounds you and your loved ones this Christmas.",
            "A creative inspiration leads to new opportunities.",
            "Forgiveness opens a door you thought was closed forever.",
            "Gratitude multiplies your blessings tenfold this season.",
            "A long-held wish begins its journey to fulfillment.",
            "Your kindness returns to you in beautiful, unexpected ways.",
            "Peace settles into your home and heart this Christmas Eve.",
            "The magic of the season reveals your true heart's desire."
        ];

        // Generate a seed based on visitor (using localStorage) for consistent randomization per person
        function getVisitorSeed() {
            let seed = localStorage.getItem('advent_visitor_seed');
            if (!seed) {
                seed = Math.floor(Math.random() * 1000000).toString();
                localStorage.setItem('advent_visitor_seed', seed);
            }
            return parseInt(seed);
        }

        // Seeded random function for consistent per-visitor randomization
        function seededRandom(seed) {
            const x = Math.sin(seed++) * 10000;
            return x - Math.floor(x);
        }

        // Get randomized message for a specific day and visitor
        function getMessageForDay(day) {
            const seed = getVisitorSeed() + day;
            const quoteIndex = Math.floor(seededRandom(seed) * wisdomQuotes.length);
            const oracleIndex = Math.floor(seededRandom(seed + 100) * oracleMessages.length);
            
            return {
                quote: wisdomQuotes[quoteIndex],
                oracle: oracleMessages[oracleIndex]
            };
        }

        // Special Day 24 message
        const day24Message = {
            quote: { text: "Peace and Joy are the gifts of a Soul aligned with the Universe.", book: "Laws of Love" },
            oracle: "‚ú® Merry Christmas with Love ‚ú®\n\nMay the magic of this sacred night fill your heart with wonder, your home with warmth, and your soul with everlasting light."
        };

        // ==================== SNOW EFFECT ====================
        function createSnowflake() {
            const container = document.getElementById('snowContainer');
            const snowflake = document.createElement('div');
            snowflake.className = 'snowflake';
            snowflake.innerHTML = ['‚ùÑ', '‚ùÖ', '‚ùÜ', '‚ú¶', '‚úß'][Math.floor(Math.random() * 5)];
            
            const size = Math.random() * 15 + 8;
            const startPosition = Math.random() * 100;
            const fallDuration = Math.random() * 8 + 5;
            const swayDuration = Math.random() * 4 + 2;
            const delay = Math.random() * 2;
            
            snowflake.style.left = startPosition + 'vw';
            snowflake.style.fontSize = size + 'px';
            snowflake.style.opacity = Math.random() * 0.6 + 0.3;
            snowflake.style.animationDuration = fallDuration + 's, ' + swayDuration + 's';
            snowflake.style.animationDelay = delay + 's, ' + delay + 's';
            
            container.appendChild(snowflake);
            
            setTimeout(() => {
                snowflake.remove();
            }, (fallDuration + delay) * 1000);
        }

        // Create snowflakes continuously
        setInterval(createSnowflake, 100);
        // Initial burst of snow
        for (let i = 0; i < 30; i++) {
            setTimeout(createSnowflake, i * 50);
        }

        // ==================== AUDIO SYSTEM ====================
        const ambientAudio = document.getElementById('ambientAudio');
        const audioToggle = document.getElementById('audioToggle');
        let isPlaying = false;

        // Create ambient sounds using Web Audio API as fallback
        let audioContext;
        let windOscillator;
        let jingleInterval;

        function initWebAudio() {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                
                // Create wind sound (filtered noise)
                const bufferSize = 2 * audioContext.sampleRate;
                const noiseBuffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);
                const output = noiseBuffer.getChannelData(0);
                for (let i = 0; i < bufferSize; i++) {
                    output[i] = Math.random() * 2 - 1;
                }
                
                const windNoise = audioContext.createBufferSource();
                windNoise.buffer = noiseBuffer;
                windNoise.loop = true;
                
                // Low-pass filter for wind effect
                const windFilter = audioContext.createBiquadFilter();
                windFilter.type = 'lowpass';
                windFilter.frequency.value = 400;
                
                // Gain for wind volume - reduced to 10%
                const windGain = audioContext.createGain();
                windGain.gain.value = 0.008;
                
                windNoise.connect(windFilter);
                windFilter.connect(windGain);
                windGain.connect(audioContext.destination);
                
                windNoise.start();
                windOscillator = { noise: windNoise, gain: windGain };
                
                // Jingle bells function
                function playJingle() {
                    if (!isPlaying) return;
                    
                    const frequencies = [1200, 1400, 1600, 1800, 2000];
                    const freq = frequencies[Math.floor(Math.random() * frequencies.length)];
                    
                    const oscillator = audioContext.createOscillator();
                    const gainNode = audioContext.createGain();
                    
                    oscillator.type = 'sine';
                    oscillator.frequency.value = freq;
                    
                    gainNode.gain.setValueAtTime(0.003, audioContext.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.0001, audioContext.currentTime + 0.3);
                    
                    oscillator.connect(gainNode);
                    gainNode.connect(audioContext.destination);
                    
                    oscillator.start();
                    oscillator.stop(audioContext.currentTime + 0.3);
                }
                
                // Random jingles
                jingleInterval = setInterval(() => {
                    if (isPlaying && Math.random() > 0.7) {
                        playJingle();
                        if (Math.random() > 0.5) {
                            setTimeout(playJingle, 100);
                        }
                    }
                }, 2000);
                
            } catch (e) {
                console.log('Web Audio API not supported');
            }
        }

        audioToggle.addEventListener('click', () => {
            isPlaying = !isPlaying;
            
            if (isPlaying) {
                audioToggle.textContent = 'üîä';
                audioToggle.classList.add('playing');
                
                // Try to play custom ambient file first
                ambientAudio.play().then(() => {
                    // Custom audio is playing - no need for synth sounds
                    console.log('Playing custom audio file');
                }).catch(() => {
                    // No custom audio file found - use generated sounds
                    console.log('No audio file found, using generated sounds');
                    if (!audioContext) {
                        initWebAudio();
                    }
                    if (audioContext && audioContext.state === 'suspended') {
                        audioContext.resume();
                    }
                    if (windOscillator) {
                        windOscillator.gain.gain.value = 0.008;
                    }
                });
            } else {
                if (windOscillator) {
                    windOscillator.gain.gain.value = 0;
                }
                audioToggle.textContent = 'üîá';
                audioToggle.classList.remove('playing');
                ambientAudio.pause();
            }
        });

        // ==================== CALENDAR CREATION ====================
        const calendarGrid = document.getElementById('calendarGrid');
        const hueClasses = ['hue-green', 'hue-blue', 'hue-red', 'hue-purple', 'hue-cyan'];

        // Calculate circular positions
        function getCircularPosition(index, total, centerX, centerY, radius) {
            const angle = (index / total) * 2 * Math.PI - Math.PI / 2; // Start from top
            const x = centerX + radius * Math.cos(angle);
            const y = centerY + radius * Math.sin(angle);
            return { x, y };
        }

        // Get container dimensions
        const containerWidth = 1000;
        const containerHeight = 900;
        const centerX = containerWidth / 2;
        const centerY = containerHeight / 2;

        // Create windows 1-23 in circles around Day 24
        const innerRing = [1, 2, 3, 4, 5, 6, 7, 8]; // 8 windows in inner ring
        const outerRing = [9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23]; // 15 windows in outer ring

        // Create all windows
        for (let day = 1; day <= 24; day++) {
            const card = document.createElement('div');
            card.className = 'window-card';
            if (day === 24) card.classList.add('day-24');
            card.dataset.day = day;

            // Check if this day is already opened
            if (localStorage.getItem('advent_opened_' + day)) {
                card.classList.add('opened');
            }

            // Check if this day is locked
            if (!isDayUnlocked(day)) {
                card.classList.add('locked');
                // Add random hue class for locked windows
                const randomHue = hueClasses[Math.floor(Math.random() * hueClasses.length)];
                card.classList.add(randomHue);
            }

            // Position the card
            if (day === 24) {
                // Day 24 is centered via CSS
            } else if (innerRing.includes(day)) {
                // Inner ring
                const index = innerRing.indexOf(day);
                const pos = getCircularPosition(index, innerRing.length, centerX, centerY, 200);
                card.style.left = `${pos.x - 50}px`;
                card.style.top = `${pos.y - 50}px`;
                card.classList.add('drifting');
            } else {
                // Outer ring
                const index = outerRing.indexOf(day);
                const pos = getCircularPosition(index, outerRing.length, centerX, centerY, 350);
                card.style.left = `${pos.x - 50}px`;
                card.style.top = `${pos.y - 50}px`;
                card.classList.add('drifting');
            }

            // Add drifting animation parameters
            if (day !== 24) {
                const timeOffset = (new Date().getHours() * 60 + new Date().getMinutes()) / 1440;
                const dayOffset = day / 24;
                
                card.style.setProperty('--drift-duration', `${40 + Math.random() * 30}s`);
                card.style.setProperty('--drift-delay', `${-Math.random() * 40}s`);
                card.style.setProperty('--drift-x1', `${(Math.sin(timeOffset * Math.PI * 2 + dayOffset * 10) * 20).toFixed(1)}px`);
                card.style.setProperty('--drift-y1', `${(Math.cos(timeOffset * Math.PI * 2 + dayOffset * 8) * 15).toFixed(1)}px`);
                card.style.setProperty('--drift-x2', `${(Math.sin(timeOffset * Math.PI * 2 + dayOffset * 12 + 2) * -15).toFixed(1)}px`);
                card.style.setProperty('--drift-y2', `${(Math.cos(timeOffset * Math.PI * 2 + dayOffset * 6 + 1) * 20).toFixed(1)}px`);
                card.style.setProperty('--drift-x3', `${(Math.sin(timeOffset * Math.PI * 2 + dayOffset * 14 + 4) * 12).toFixed(1)}px`);
                card.style.setProperty('--drift-y3', `${(Math.cos(timeOffset * Math.PI * 2 + dayOffset * 10 + 3) * -10).toFixed(1)}px`);
            }

            card.innerHTML = `
                <img class="window-image" 
                     src="${day === 24 ? 'window24closed.png' : 'window' + day + '.png'}" 
                     alt="Day ${day}"
                     onerror="this.src='data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><rect fill=%22%23222%22 width=%22100%22 height=%22100%22/><text x=%2250%22 y=%2255%22 fill=%22%234a9078%22 text-anchor=%22middle%22 font-size=%2224%22>${day}</text></svg>'">
                <div class="day-number">${day}</div>
                <div class="lock-icon">üîí</div>
            `;

            card.addEventListener('click', () => handleWindowClick(day, card));
            calendarGrid.appendChild(card);
        }

        // Update drift positions periodically based on time
        function updateDriftPositions() {
            const cards = document.querySelectorAll('.window-card.drifting');
            const timeOffset = (new Date().getHours() * 60 + new Date().getMinutes()) / 1440;
            
            cards.forEach((card, index) => {
                const dayOffset = (index + 1) / 24;
                card.style.setProperty('--drift-x1', `${(Math.sin(timeOffset * Math.PI * 2 + dayOffset * 10) * 20).toFixed(1)}px`);
                card.style.setProperty('--drift-y1', `${(Math.cos(timeOffset * Math.PI * 2 + dayOffset * 8) * 15).toFixed(1)}px`);
                card.style.setProperty('--drift-x2', `${(Math.sin(timeOffset * Math.PI * 2 + dayOffset * 12 + 2) * -15).toFixed(1)}px`);
                card.style.setProperty('--drift-y2', `${(Math.cos(timeOffset * Math.PI * 2 + dayOffset * 6 + 1) * 20).toFixed(1)}px`);
                card.style.setProperty('--drift-x3', `${(Math.sin(timeOffset * Math.PI * 2 + dayOffset * 14 + 4) * 12).toFixed(1)}px`);
                card.style.setProperty('--drift-y3', `${(Math.cos(timeOffset * Math.PI * 2 + dayOffset * 10 + 3) * -10).toFixed(1)}px`);
            });
        }

        // Update positions every 5 minutes
        setInterval(updateDriftPositions, 5 * 60 * 1000);

        // ==================== DATE CHECKING ====================
        function isDayUnlocked(day) {
            if (TEST_MODE) return true;
            
            const now = new Date();
            const year = now.getFullYear();
            const month = now.getMonth(); // 0-11, December is 11
            const date = now.getDate();
            
            // Only unlock during December 2025 (or any December for flexibility)
            if (month === 11) { // December
                return date >= day;
            }
            
            // After December, all are unlocked
            if (month > 11 || year > 2025) {
                return true;
            }
            
            return false;
        }

        // ==================== MAGIC CLOUD MESSAGE ====================
        function showMagicCloud(day) {
            // Get the message for this day
            const message = day === 24 ? day24Message : getMessageForDay(day);
            
            // Pick a random cloud image
            const cloudImg = cloudImages[Math.floor(Math.random() * cloudImages.length)];
            
            // Create the cloud element
            const cloud = document.createElement('div');
            cloud.className = 'magic-cloud';
            cloud.innerHTML = `
                <img class="cloud-image" src="${cloudImg}" alt="Cloud" onerror="this.style.display='none'">
                <div class="cloud-text-container">
                    <div class="cloud-book">${message.quote.book}</div>
                    <div class="cloud-book-subtitle">from "Guidance is a Piece of God"</div>
                    <div class="cloud-message">"${message.quote.text}"</div>
                    <div class="cloud-oracle">${message.oracle.replace(/\n/g, '<br>')}</div>
                    <div class="cloud-signature">~ your Thought Seer</div>
                </div>
            `;
            
            document.body.appendChild(cloud);
            
            // Create twinkling stars around the cloud
            createTwinklingStars();
            
            // Create floating particles
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'magic-particle';
                    particle.style.left = `${50 + (Math.random() - 0.5) * 40}%`;
                    particle.style.top = `${50 + (Math.random() - 0.5) * 30}%`;
                    particle.style.setProperty('--tx', `${(Math.random() - 0.5) * 200}px`);
                    particle.style.setProperty('--ty', `${-100 - Math.random() * 100}px`);
                    document.body.appendChild(particle);
                    
                    setTimeout(() => particle.remove(), 3000);
                }, i * 150);
            }
            
            // Remove cloud after animation (7 seconds)
            setTimeout(() => {
                cloud.remove();
                // Remove stars
                document.querySelectorAll('.twinkle-star').forEach(star => star.remove());
            }, 7000);
        }

        // Create twinkling stars
        function createTwinklingStars() {
            const starCount = 30;
            for (let i = 0; i < starCount; i++) {
                const star = document.createElement('div');
                star.className = 'twinkle-star' + (Math.random() > 0.7 ? ' large' : '');
                
                // Position stars around the cloud area
                const angle = Math.random() * Math.PI * 2;
                const distance = 200 + Math.random() * 250;
                const centerX = window.innerWidth / 2;
                const centerY = window.innerHeight / 2;
                
                star.style.left = `${centerX + Math.cos(angle) * distance}px`;
                star.style.top = `${centerY + Math.sin(angle) * distance}px`;
                star.style.setProperty('--twinkle-duration', `${0.5 + Math.random() * 1.5}s`);
                star.style.animationDelay = `${Math.random() * 2}s`;
                
                document.body.appendChild(star);
            }
        }

        // ==================== WINDOW INTERACTION ====================
        function handleWindowClick(day, card) {
            if (card.classList.contains('locked')) {
                showLockedMessage(day);
                return;
            }

            // Mark as opened
            card.classList.add('opened');
            localStorage.setItem('advent_opened_' + day, 'true');

            // Show magic cloud (no modal after)
            setTimeout(() => showMagicCloud(day), 300);
        }

        function showLockedMessage(day) {
            const daysUntil = day - new Date().getDate();
            const message = daysUntil > 0 
                ? `This window awakens on December ${day}. ${daysUntil} day${daysUntil > 1 ? 's' : ''} to go...`
                : `This window is sealed until December ${day}.`;
            
            // Create a subtle toast notification
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                bottom: 100px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(26, 45, 38, 0.95);
                border: 2px solid #4a9078;
                color: #d4e8de;
                padding: 15px 30px;
                border-radius: 30px;
                font-family: 'Cormorant Garamond', serif;
                font-size: 1.1rem;
                z-index: 9999;
                animation: fadeInOut 3s ease;
                text-align: center;
            `;
            toast.textContent = message;
            document.body.appendChild(toast);

            setTimeout(() => toast.remove(), 3000);
        }

        // Add the toast animation
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInOut {
                0% { opacity: 0; transform: translateX(-50%) translateY(20px); }
                15% { opacity: 1; transform: translateX(-50%) translateY(0); }
                85% { opacity: 1; transform: translateX(-50%) translateY(0); }
                100% { opacity: 0; transform: translateX(-50%) translateY(-20px); }
            }
        `;
        document.head.appendChild(style);

        // ==================== MODAL ====================
        const modal = document.getElementById('modal');
        const modalDay = document.getElementById('modalDay');
        const modalImage = document.getElementById('modalImage');
        const modalMessage = document.getElementById('modalMessage');

        function openModal(day) {
            const isChristmasEve = day === 24;
            
            modalDay.textContent = isChristmasEve ? 'üéÑ Christmas Eve üéÑ' : `December ${day}`;
            modalImage.src = `${day}.jpg`;
            modalImage.onerror = function() {
                this.style.display = 'none';
            };
            modalImage.onload = function() {
                this.style.display = 'block';
            };
            
            const message = messages[day] || "A special message awaits...";
            modalMessage.innerHTML = message;
            
            if (isChristmasEve) {
                modalMessage.classList.add('christmas-message');
                createSparkles();
            } else {
                modalMessage.classList.remove('christmas-message');
            }

            modal.classList.add('show');
        }

        function closeModal() {
            modal.classList.remove('show');
            const sparkles = document.getElementById('sparkles');
            sparkles.innerHTML = '';
        }

        // Close modal on outside click
        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeModal();
        });

        // Close modal on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });

        // ==================== SPARKLES FOR DAY 24 ====================
        function createSparkles() {
            const container = document.getElementById('sparkles');
            container.innerHTML = '';
            
            for (let i = 0; i < 20; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = Math.random() * 100 + '%';
                sparkle.style.top = Math.random() * 100 + '%';
                sparkle.style.animationDelay = Math.random() * 3 + 's';
                sparkle.style.backgroundColor = ['#ffffff', '#4a9078', '#b8d4c8', '#d4e8de'][Math.floor(Math.random() * 4)];
                container.appendChild(sparkle);
            }
        }

        // ==================== TEST MODE INDICATOR ====================
        if (TEST_MODE) {
            document.getElementById('testBadge').classList.add('active');
        }

        // ==================== TEST PANEL ====================
        const testPanel = document.getElementById('testPanel');
        const testPanelToggle = document.getElementById('testPanelToggle');
        const daySelector = document.getElementById('daySelector');
        const testQuote = document.getElementById('testQuote');
        const testSource = document.getElementById('testSource');
        const testMessage = document.getElementById('testMessage');
        let selectedTestDay = 1;

        // Toggle panel
        testPanelToggle.addEventListener('click', () => {
            testPanel.classList.toggle('open');
        });

        // Create day buttons
        for (let i = 1; i <= 24; i++) {
            const btn = document.createElement('button');
            btn.className = 'day-btn' + (i === 1 ? ' active' : '');
            btn.textContent = i;
            btn.addEventListener('click', () => {
                document.querySelectorAll('.day-btn').forEach(b => b.classList.remove('active'));
                btn.classList.add('active');
                selectedTestDay = i;
                
                // Load message for this day
                const msg = i === 24 ? day24Message : getMessageForDay(i);
                testQuote.value = msg.quote.text;
                testSource.value = msg.quote.book;
                testMessage.value = msg.oracle;
            });
            daySelector.appendChild(btn);
        }

        // Initialize with day 1
        const initialMsg = getMessageForDay(1);
        testQuote.value = initialMsg.quote.text;
        testSource.value = initialMsg.quote.book;
        testMessage.value = initialMsg.oracle;

        // Preview cloud
        document.getElementById('previewCloudBtn').addEventListener('click', () => {
            showMagicCloudCustom(selectedTestDay, testQuote.value, testSource.value, testMessage.value);
        });

        // Preview modal only - removed since we only use clouds now
        document.getElementById('previewModalBtn').addEventListener('click', () => {
            showMagicCloudCustom(selectedTestDay, testQuote.value, testSource.value, testMessage.value);
        });

        // Preview both - same as cloud now
        document.getElementById('previewBothBtn').addEventListener('click', () => {
            showMagicCloudCustom(selectedTestDay, testQuote.value, testSource.value, testMessage.value);
        });

        // Reset storage
        document.getElementById('resetStorageBtn').addEventListener('click', () => {
            if (confirm('This will reset all opened windows and your visitor ID (messages will randomize again). Are you sure?')) {
                for (let i = 1; i <= 24; i++) {
                    localStorage.removeItem('advent_opened_' + i);
                }
                localStorage.removeItem('advent_visitor_seed');
                location.reload();
            }
        });

        // Custom cloud function for testing
        function showMagicCloudCustom(day, quoteText, bookName, oracleText) {
            const cloudImg = cloudImages[Math.floor(Math.random() * cloudImages.length)];
            
            const cloud = document.createElement('div');
            cloud.className = 'magic-cloud';
            cloud.innerHTML = `
                <img class="cloud-image" src="${cloudImg}" alt="Cloud" onerror="this.style.display='none'">
                <div class="cloud-text-container">
                    <div class="cloud-book">${bookName}</div>
                    <div class="cloud-book-subtitle">from "Guidance is a Piece of God"</div>
                    <div class="cloud-message">"${quoteText}"</div>
                    <div class="cloud-oracle">${oracleText.replace(/\n/g, '<br>')}</div>
                    <div class="cloud-signature">~ your Thought Seer</div>
                </div>
            `;
            
            document.body.appendChild(cloud);
            createTwinklingStars();
            
            // Create floating particles
            for (let i = 0; i < 15; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'magic-particle';
                    particle.style.left = `${50 + (Math.random() - 0.5) * 40}%`;
                    particle.style.top = `${50 + (Math.random() - 0.5) * 30}%`;
                    particle.style.setProperty('--tx', `${(Math.random() - 0.5) * 200}px`);
                    particle.style.setProperty('--ty', `${-100 - Math.random() * 100}px`);
                    document.body.appendChild(particle);
                    
                    setTimeout(() => particle.remove(), 3000);
                }, i * 150);
            }
            
            setTimeout(() => {
                cloud.remove();
                document.querySelectorAll('.twinkle-star').forEach(star => star.remove());
            }, 7000);
        }

        // ==================== PRELOAD IMAGES ====================
        function preloadImages() {
            // Preload window images
            for (let i = 1; i <= 24; i++) {
                const img = new Image();
                img.src = `window${i}.png`;
            }
            // Preload cloud images
            cloudImages.forEach(src => {
                const img = new Image();
                img.src = src;
            });
        }
        preloadImages();

        // ==================== ABOUT MODAL ====================
        function openAboutModal(event) {
            event.preventDefault();
            document.getElementById('aboutModal').classList.add('show');
        }

        function closeAboutModal() {
            document.getElementById('aboutModal').classList.remove('show');
        }

        // Close about modal on outside click
        document.getElementById('aboutModal').addEventListener('click', (e) => {
            if (e.target.id === 'aboutModal') closeAboutModal();
        });

        // Close about modal on Escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeAboutModal();
                closeModal();
            }
        });
    </script>
</body>
</html>
